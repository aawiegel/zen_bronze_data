# This is a Databricks asset bundle definition for flexible-data-processing.
# The Databricks extension requires databricks.yml configuration file.
# See https://docs.databricks.com/dev-tools/bundles/index.html for documentation.

bundle:
  name: zen_bronze_data

targets:
  dev:
    mode: development
    default: true
    workspace:
      host: https://dbc-81f4a118-bb2c.cloud.databricks.com

resources:
  schemas:
    bronze_schema:
      name: bronze
      catalog_name: workspace
      comment: "Bronze layer schema for raw data"

    silver_schema:
      name: silver
      catalog_name: workspace
      comment: "Silver layer schema for cleaned data"
    
    gold_schema:
      name: gold
      catalog_name: workspace
      comment: "Gold layer schema for analysis-ready data sets"

  volumes:
    incoming:
      catalog_name: workspace
      name: incoming
      schema_name: bronze

  jobs:
    generate_sample_files:
      name: "Generate Sample CSV Files"
      tasks:
        - task_key: generate_files
          notebook_task:
            notebook_path: ./notebooks/generate_sample_files.py
            source: WORKSPACE
            base_parameters:
              catalog: workspace
              bronze_schema: ${resources.schemas.bronze_schema.name}
              silver_schema: ${resources.schemas.silver_schema.name}
              incoming_volume: ${resources.volumes.incoming.name}
